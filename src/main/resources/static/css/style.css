/* ===============  Accessibility helpers  =============== */
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
.skip-link{position:absolute;left:-999px;top:auto;background:#003a70;color:#fff;padding:.4rem .6rem;border-radius:6px;text-decoration:none;z-index:1000}
.skip-link:focus{left:1rem;top:1rem}
:focus-visible{outline:3px solid #0067c2;outline-offset:2px}
@media (prefers-reduced-motion: reduce){
    #idx-bar > span{transition:none}
}

/* ===============  Base layout  =============== */
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica}

/* Header & logo ---------------------------------------------------- */
header{background:#003a70;display:flex;align-items:center;gap:1rem;padding:.3rem 1rem}
header img{height:120px;background:#fff;padding:6px;border-radius:6px}
header nav{display:flex;gap:1rem;align-items:center}
header nav a{color:#fff;text-decoration:none;font-weight:bold;font-size:1.05rem;padding:.25rem .4rem;border-radius:4px}
header nav a[aria-current="page"]{background:rgba(255,255,255,.2)}

/* Main layout ----------------------------------------------------- */
.layout{max-width:1600px;margin:2rem auto;display:flex;gap:1rem;align-items:flex-start}
.sidebar{flex:0 0 300px;display:flex;flex-direction:column;gap:1rem}
.content{flex:1 1 auto;background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.info-badge{
    display:inline-flex;
    align-items:center;
    gap:.3rem;
    font-weight:700;
    border:1px solid #cfe0ff;
    background:#eef4ff;
    color:#0b4c9c;
    padding:.35rem .75rem;
    border-radius:999px;
    cursor:pointer;
    box-shadow:0 1px 0 rgba(11,76,156,.06);
}
.info-badge:focus-visible{outline:2px solid #0b4c9c;outline-offset:2px}
.help .info-badge{margin-top:.6rem}
.advanced-help{
    margin-top:.65rem;
    padding:1rem;
    border-radius:10px;
    border:1px solid #e5e7eb;
    background:linear-gradient(180deg, #f9fbff 0%, #f4f7fb 100%);
    color:#0f172a;
    box-shadow:inset 0 1px 0 rgba(255,255,255,.7);
}
.advanced-help h3{margin-top:0;margin-bottom:.4rem;font-size:1rem}
.advanced-help ul{margin:.35rem 0 0 0;padding-left:1.1rem;display:flex;flex-direction:column;gap:.45rem}
.advanced-help[hidden]{display:none}
.help{flex:0 0 330px;max-width:330px;background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.1);display:flex;flex-direction:column;gap:.75rem;transition:flex-basis .25s ease,max-width .25s ease,padding .25s ease,box-shadow .25s ease,max-height .25s ease;max-height:1200px;overflow:hidden;align-self:flex-start}
.help__header{display:flex;align-items:center;gap:.5rem}
.help__header h2{margin:0;flex:1 1 auto}
.help__body{display:flex;flex-direction:column;gap:.5rem}
.help-toggle{flex:0 0 auto;display:inline-flex;align-items:center;justify-content:center;width:2.3rem;height:2.3rem;border-radius:8px;border:1px solid #cfe0ff;background:#f5f8ff;color:#003a70;cursor:pointer;transition:background .2s ease,color .2s ease,border-color .2s ease,transform .2s ease}
.help-toggle:hover{background:#e8f1ff}
.help-toggle:focus-visible{outline:2px solid #003a70;outline-offset:2px}
.help.is-collapsed{flex:0 0 64px;max-width:64px;max-height:72px;padding:.65rem;box-shadow:0 0 0 1px #e5e7eb;align-self:flex-start}
.help.is-collapsed .help__body,.help.is-collapsed h2{display:none}
.help.is-collapsed .help__header{justify-content:flex-end}
.help.is-collapsed .help-toggle{margin-left:auto;width:100%;height:100%}
.help.is-collapsed .help-toggle .help-toggle__icon{transform:rotate(180deg)}

/* =============== Filterable combo boxes  =============== */
.filterable-select{position:relative;display:flex;flex-direction:column;gap:.25rem;width:100%;}
.filterable-select-control{position:relative;display:flex;align-items:center;}
.filterable-select-input{flex:1 1 auto;width:100%;padding:.45rem .45rem;padding-right:2.2rem;border:1px solid #cbd5e1;border-radius:6px;font-size:1rem;color:#0f172a;background:#fff;}
.filterable-select-input:focus-visible{outline:2px solid #2c64b5;outline-offset:2px;border-color:#2c64b5;}
.filterable-select-toggle{position:absolute;top:0;right:0;height:100%;width:2.2rem;display:flex;align-items:center;justify-content:center;background:none;border:none;color:#475569;cursor:pointer;border-radius:0 6px 6px 0;}
.filterable-select-toggle::after{content:"\25BE";font-size:.9rem;}
.filterable-select-toggle:focus-visible{outline:2px solid #2c64b5;outline-offset:2px;border-radius:6px;}
.filterable-select.is-disabled .filterable-select-input{background:#f8fafc;color:#94a3b8;cursor:not-allowed;}
.filterable-select.is-disabled .filterable-select-toggle{color:#cbd5e1;cursor:not-allowed;}
.filterable-select-dropdown{position:absolute;top:calc(100% + .2rem);left:0;right:0;z-index:25;display:none;max-height:220px;overflow:auto;background:#fff;border:1px solid #cbd5e1;border-radius:6px;box-shadow:0 6px 20px rgba(15,23,42,.14);padding:.25rem 0;}
.filterable-select.is-open .filterable-select-dropdown{display:block;}
.filterable-select-option{padding:.4rem .6rem;cursor:pointer;font-size:.95rem;color:#0f172a;line-height:1.35;}
.filterable-select-option:hover,.filterable-select-option.is-active{background:#eef4ff;}
.filterable-select-option[aria-selected="true"]{font-weight:600;}
.filterable-select-empty{padding:.6rem .75rem;font-size:.9rem;color:#475569;font-style:italic;}
.filterable-select.is-disabled .filterable-select-dropdown{display:none!important;}

/* ===============  Multi-select chips  =============== */
.filterable-multi{position:relative;display:flex;flex-direction:column;gap:.25rem;width:100%;}
.filterable-multi__control{display:flex;flex-wrap:wrap;align-items:center;gap:.35rem;border:1px solid #cbd5e1;border-radius:6px;padding:.35rem .4rem;background:#fff;min-height:46px;}
.filterable-multi__control:focus-within{border-color:#2c64b5;box-shadow:0 0 0 3px rgba(44,100,181,.12);}
.filterable-multi__chips{display:flex;flex-wrap:wrap;gap:.35rem;align-items:center;flex:1 1 auto;min-width:140px;}
.filterable-multi__placeholder{color:#94a3b8;font-style:italic;padding:.15rem 0;}
.filterable-multi__chip{display:inline-flex;align-items:center;gap:.25rem;background:#eef4ff;border:1px solid #cfe0ff;color:#0b4c9c;border-radius:999px;padding:.25rem .6rem;font-size:.9rem;}
.filterable-multi__remove{border:none;background:none;color:#0b4c9c;cursor:pointer;padding:0;line-height:1;font-size:1rem;}
.filterable-multi__remove:focus-visible{outline:2px solid #2c64b5;outline-offset:2px;border-radius:50%;}
.filterable-multi .filterable-select-input{border:none;padding:.35rem .4rem;min-width:140px;flex:1 1 140px;box-shadow:none;}
.filterable-multi .filterable-select-input:focus{outline:none;}
.filterable-multi .filterable-select-toggle{position:static;width:2.2rem;height:2.2rem;border:1px solid #cbd5e1;border-radius:6px;background:#f8fafc;color:#475569;}
.filterable-multi .filterable-select-toggle:focus-visible{outline:2px solid #2c64b5;outline-offset:2px;}
.filterable-multi .filterable-select-dropdown{width:100%;}
.filterable-select-option--multi{display:flex;align-items:center;gap:.5rem;}
.filterable-multi.is-disabled .filterable-multi__control{background:#f8fafc;border-color:#e2e8f0;color:#94a3b8;}
.filterable-multi.is-disabled .filterable-select-toggle{cursor:not-allowed;color:#cbd5e1;background:#f1f5f9;}
.async-select.async-multi .async-multi__controls{display:flex;justify-content:flex-end;margin-top:.3rem;}
.async-select.async-multi .async-multi__clear{border:1px solid #cbd5e1;background:#f8fafc;border-radius:6px;color:#0f172a;}

/* ===============  Search  =============== */
#search-bar{
    display:flex;
    gap:.5rem;
    align-items:stretch;
    flex:1 1 auto;
    min-width:0;
}
#search-bar label{margin:0}
#search-input{
    flex:1 1 auto;
    padding:.45rem;
    font-size:1rem;
    min-width:0;
}
/* Safari/Chrome: hide datalist dropdown icon inside the field */
#search-input::-webkit-calendar-picker-indicator{display:none}
#search-input::-webkit-list-button{display:none}
#search-input::-ms-clear{display:none}
#search-btn{padding:.45rem 1rem;cursor:pointer}
.search-shell{
    position:relative;
    display:flex;
    align-items:stretch;
    gap:.5rem;
    flex-wrap:wrap;
    margin-bottom:1rem;
}
.search-scope-badge{
    background:#0b4c9c;
    color:#fff;
    border:none;
    border-radius:999px;
    padding:.2rem .8rem;
    font-size:.75rem;
    font-weight:600;
    letter-spacing:.04em;
    text-transform:uppercase;
    cursor:default;
    line-height:1.4;
    flex:0 0 auto;
    box-shadow:0 0 0 1px rgba(11,76,156,.25);
}
.search-scope-badge.is-filtered{
    background:#0b4c9c;
    box-shadow:0 0 0 1px rgba(255,255,255,.25),0 0 0 2px rgba(11,76,156,.4);
}
.search-scope-badge[aria-pressed="true"],
.search-scope-badge:focus-visible{
    outline:2px solid #003a70;
    outline-offset:2px;
}
.search-scope-badge.is-resettable{cursor:pointer}
.search-type-pill{ 
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border-radius:999px;
    border:1px solid rgba(11,76,156,.3);
    background:rgba(11,76,156,.08);
    color:#0b4c9c;
    font-size:.8rem;
    font-weight:600;
    padding:.1rem .6rem;
    text-transform:uppercase;
    letter-spacing:.04em;
    cursor:pointer;
}
.search-shell #search-bar{
    flex:1 1 360px;
}

@media (max-width: 1024px){
    .layout{
        flex-direction:column;
        padding:0 1rem;
    }

    .content{order:1}
    .sidebar{order:2}
    .help{order:3}

    .sidebar,
    .help{
        flex:1 1 auto;
        width:100%;
    }

    .help .info-badge{
        width:100%;
        justify-content:flex-start;
    }

    .advanced-help{
        width:100%;
    }

    .tables ul,
    .report-type-list{
        display:flex;
        flex-direction:column;
        gap:.35rem;
    }

    .tables li,
    .report-type-list .type-btn,
    .quick-link{
        width:100%;
        text-align:left;
        white-space:normal;
        word-break:break-word;
    }
}

@media (max-width: 720px){
    .search-shell{
        flex-direction:column;
        align-items:stretch;
        gap:.4rem;
    }

    .search-shell #search-bar{
        width:100%;
    }

    .search-scope-badge{
        align-self:flex-start;
    }
}
.search-type-pill:hover{background:rgba(11,76,156,.15)}
.search-type-pill:focus-visible{outline:2px solid #0b4c9c;outline-offset:2px}
.hit-highlight{background:yellow;box-shadow:inset 0 -0.25em yellow;}

/* ===============  Blue button styling (for reindex) ====== */
.btn-primary,
#idx-reindex-side{
    background:#0067c2;
    color:#fff;
    border:none;
    border-radius:6px;
    padding:.45rem .9rem;
    cursor:pointer;
    font-weight:600;
}
.btn-primary:hover,
#idx-reindex-side:hover{background:#0054a6}

/* ===============  Progress bar  =============== */
#idx-box{display:none;margin:.5rem 0 1rem 0}
#idx-box.active{display:flex;align-items:center;gap:.6rem}
#idx-bar{flex:1 1 auto;height:10px;background:#eee;border-radius:6px;overflow:hidden}
#idx-bar > span{display:block;height:100%;width:0%;background:#0067c2;transition:width .2s}
#idx-text{font-size:.9rem;color:#333;min-width:220px;text-align:right}

/* ===============  Shortcuts  =============== */
.shortcut{background:#0067c2;border-radius:6px;margin:.55rem 0;box-shadow:0 2px 4px rgba(0,0,0,.12)}
.head{
    display:flex;align-items:center;justify-content:center;gap:.4rem;
    width:100%;background:none;border:none;cursor:pointer;
    padding:.55rem .9rem;color:#fff;font-weight:bold;
    border-radius:6px;
}
@media (max-width: 1024px){
    .head{
        justify-content:flex-start;
        flex-wrap:wrap;
        gap:.35rem;
    }
}
.head:hover{opacity:.9}
.label{flex:1 1 auto;text-align:center;pointer-events:none;color:#fff}
.rename,.chev{flex:0 0 auto;color:#fff;font-size:1rem;background:none;border:none;cursor:pointer}
.shortcut.open .chev{transform:rotate(90deg);transition:.2s}
.panel{display:none;background:#e9f1ff;padding:.7rem}
.shortcut.open .panel{display:block}
.panel input{width:100%;padding:.4rem;font-family:monospace}
.panel-list{display:flex;flex-direction:column;gap:.45rem}
.panel-list .sc-status{margin:0;font-size:.9rem;color:#334}
.panel-list .sc-status.error{color:#b91c1c}
.panel-list .sc-status.empty{color:#555;font-style:italic}
.sc-summary{font-size:.85rem;color:#003a70;font-weight:600}
.sc-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.35rem}
.sc-list li{margin:0;padding:0}
.sc-item{width:100%;text-align:left;border:1px solid #cfe0ff;background:#fff;border-radius:6px;padding:.45rem .6rem;cursor:pointer;font-size:.95rem;line-height:1.35}
.sc-item:hover{background:#f0f6ff}
.sc-item.is-static,.sc-item.is-static:hover{cursor:default;background:#fff}
.sc-item-primary{display:block;font-weight:600;color:#003a70}
.sc-item-secondary{display:block;font-size:.85rem;color:#444;margin-top:.18rem}
.shortcut-actions{display:flex;justify-content:flex-end;gap:.35rem;margin:.3rem 0 .4rem}
.shortcut-actions button{width:32px;height:32px;border-radius:6px;border:1px solid #cbd5e1;background:#f9fafc;cursor:pointer;font-size:1.2rem;color:#003a70;font-weight:700;line-height:1}
.shortcut-actions button:hover{background:#e9f2ff}
.shortcut-actions button:disabled{opacity:.5;cursor:not-allowed}

/* ===============  Site software summary toggle  =============== */
.software-assignment-panel{margin-top:1rem;padding:1rem;border:1px solid #e5e7eb;border-radius:.75rem;background:#f9fafb}
.software-assignment-panel h3{margin:0 0 .75rem 0;display:flex;align-items:center;gap:.5rem;font-size:1.05rem}
.software-assignment-list{display:flex;flex-direction:column;gap:.75rem}
.software-assignment-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem;padding:.75rem;border-radius:.65rem;border:1px solid #e5e7eb;background:#fff;box-shadow:0 1px 2px rgba(15,23,42,.04)}
.software-assignment-row.is-error{border-color:#fecaca;box-shadow:0 1px 2px rgba(248,113,113,.15)}
.software-assignment__field{display:flex;flex-direction:column;gap:.35rem}
.software-assignment__field label{font-weight:600;font-size:.9rem;color:#111827}
.software-assignment__field input,.software-assignment__field select{border:1px solid #cbd5e1;border-radius:6px;padding:.45rem .6rem;font-size:.95rem}
.software-assignment__field input:focus-visible,.software-assignment__field select:focus-visible{outline:2px solid #003a70;outline-offset:2px}
.software-assignment__actions{display:flex;align-items:center;justify-content:flex-end}
.software-assignment__remove{border:1px solid #ef4444;background:#fff;color:#b91c1c;border-radius:6px;padding:.4rem .75rem;font-weight:700;cursor:pointer}
.software-assignment__remove:hover{background:#fee2e2}
.software-assignment__error{color:#b91c1c;font-size:.85rem;font-weight:600}
.software-assignment__meta{color:#4b5563;font-size:.85rem}
.software-assignment__empty{color:#6b7280;font-style:italic}
.software-assignment__add{margin-top:.75rem}
.async-multi{display:flex;flex-direction:column;gap:.35rem}
.async-multi select{width:100%;min-height:150px;border:1px solid #cbd5e1;border-radius:6px;padding:.35rem;background:#fff;font-size:.95rem}
.async-multi select:focus-visible{outline:2px solid #003a70;outline-offset:2px}
.async-multi__controls{display:flex;justify-content:flex-end;gap:.5rem}
.async-multi__clear{border:1px solid #d1d5db;background:#f9fafb;color:#111827;border-radius:6px;padding:.35rem .65rem;cursor:pointer;font-weight:600}
.async-multi__clear:hover{background:#e5e7eb}
.async-multi__hint{color:#6b7280;margin:0;font-size:.9rem}

/* ===============  Table list  =============== */
.tables ul{list-style:none;padding:0;margin:0}
.tables li{background:#eee;margin:.35rem 0;padding:.55rem;border-radius:4px;cursor:pointer}
.tables li:hover{background:#d5e4ff}

/* ===============  Dynamic software list on create form  =============== */
.form-field.form-field--block{display:block}
.form-field.form-field--block .form-field__label{display:block;margin-bottom:.5rem}
.software-list{display:flex;flex-direction:column;gap:.75rem;padding:.85rem;background:#f8fafc;border:1px solid #dbeafe;border-radius:8px}
.software-list__hint{margin:0;font-size:.95rem;color:#1f3d7a}
.software-list__empty{margin:0;font-size:.9rem;color:#475569;font-style:italic}
.software-list__items{display:flex;flex-direction:column;gap:.75rem}
.software-list__add{align-self:flex-start;background:#0067c2;color:#fff;border:none;border-radius:6px;padding:.45rem .9rem;font-weight:600;cursor:pointer;transition:background .2s ease-in-out}
.software-list__add:hover{background:#0054a6}
.software-entry{border:1px solid #cbd5e1;border-radius:8px;padding:.75rem;background:#fff;display:flex;flex-direction:column;gap:.6rem;box-shadow:0 1px 2px rgba(15,23,42,.05)}
.software-entry__grid{display:grid;gap:.6rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.software-entry__field{display:flex;flex-direction:column;gap:.35rem}
.software-entry__field .form-field__label{font-size:.9rem;color:#0f172a;font-weight:600}
.software-entry__actions{display:flex;justify-content:flex-end}
.software-entry__remove{background:none;border:1px solid #ef4444;color:#b91c1c;border-radius:6px;padding:.35rem .75rem;font-weight:600;cursor:pointer;transition:background .2s ease-in-out,color .2s}
.software-entry__remove:hover{background:rgba(239,68,68,.08);color:#991b1b}
.software-entry__remove:focus-visible{outline:2px solid #ef4444;outline-offset:2px}

@media (max-width:720px){
    .software-entry__grid{grid-template-columns:1fr}
    .software-list__add{width:100%;text-align:center}
    .software-entry__actions{justify-content:flex-start}
}

/* ===============  Result table  =============== */
.table-scroll{overflow-x:auto}
table{border-collapse:collapse;width:100%;min-width:650px}
th,td{border:1px solid #ccc;padding:.45rem;text-align:left}
.id-chip{
    display:inline-flex;
    align-items:center;
    background:#eef4ff;
    border:1px solid #cfe0ff;
    border-radius:999px;
    padding:.1rem .55rem;
    font-family:monospace;
    font-size:.85rem;
    line-height:1.2;
    color:#003a70;
    white-space:nowrap;
}
td .id-chip{vertical-align:middle}
table caption{text-align:left;font-weight:600;margin-bottom:.4rem}
#resultArea p{margin:0}
#error{color:red;margin-top:1rem}
.table-quick-filter{
    display:inline-flex;
    align-items:center;
    gap:.25rem;
    border:none;
    background:none;
    padding:0;
    font:inherit;
    line-height:1.2;
    color:#111;
    cursor:pointer;
    text-decoration:none;
    appearance:none;
    white-space:nowrap;
    border-bottom:1px solid transparent;
}
.table-quick-filter:hover{
    border-bottom-color:currentColor;
}
.table-quick-filter:focus-visible{
    outline:2px solid currentColor;
    outline-offset:2px;
    border-bottom-color:currentColor;
}
.table-id-link{
    display:inline-flex;
    align-items:center;
    gap:.25rem;
    text-decoration:none;
    color:inherit;
}
.table-id-link:focus-visible{
    outline:2px solid #003a70;
    outline-offset:2px;
    border-radius:6px;
}
.table-id-link:hover .id-chip{
    box-shadow:0 0 0 1px rgba(0,58,112,.35) inset;
}

/* ===============  Detail view  =============== */
#back{display:inline-block;margin-bottom:1.2rem;color:#fff;background:#003a70;
    text-decoration:none;font-weight:bold;padding:.45rem .9rem;border-radius:6px}
#back:hover{background:#0054a6}
.card{background:#fff;padding:1.4rem;border-radius:8px;max-width:730px;margin:auto;box-shadow:0 2px 6px rgba(0,0,0,.1)}
#detail-layout:not(.detail-layout--with-software)>.card{max-width:1100px;width:100%}
.card--wide{max-width:none;width:100%;margin:0}
#kv{border-collapse:collapse;width:100%}
#kv th, #kv td{border:1px solid #ddd;padding:.45rem}
#kv th.key{font-weight:bold;width:180px;background:#f3f7ff;text-align:left}
.id-chip{display:inline-flex;align-items:center;font-family:"SFMono-Regular",Consolas,"Liberation Mono",monospace;font-size:.85em;
    color:#334155;background:#eef2ff;border:1px solid #d6dcff;border-radius:999px;padding:.1rem .4rem;line-height:1.2;vertical-align:middle}
.id-chip:not(:first-child){margin-left:.35rem}
.detail-header{display:flex;align-items:flex-start;gap:1rem;flex-wrap:wrap;margin-bottom:1rem}
.detail-header-main{flex:1;min-width:0;position:relative;padding-right:4.5rem}
.detail-header-actions{margin-left:auto;display:flex;align-items:center;gap:.5rem}
.detail-edit-button{display:inline-flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;border-radius:999px;border:1px solid #2c64b5;background:#fff;color:#2c64b5;cursor:pointer;transition:background .2s ease,color .2s ease,box-shadow .2s ease}
.detail-edit-button:hover,.detail-edit-button:focus-visible{background:#2c64b5;color:#fff}
.detail-edit-button:focus-visible{outline:2px solid #2c64b5;outline-offset:2px}
.detail-edit-button.is-active{background:#2c64b5;color:#fff}
.detail-edit-icon{width:1.1rem;height:1.1rem;fill:currentColor}
.detail-type-badge{position:absolute;top:.15rem;right:0;display:none;padding:.15rem .5rem;border-radius:999px;font-size:.7rem;letter-spacing:.04em;text-transform:uppercase;font-weight:600;color:#64748b;background:rgba(148,163,184,.12);border:1px solid rgba(148,163,184,.35)}
.detail-type-badge.is-visible{display:inline-flex;align-items:center;justify-content:center}
.detail-status{margin-bottom:1rem;padding:.6rem .75rem;border-radius:6px;background:#f4f6fb;color:#1f2a44;border:1px solid #d0defc;display:none}
.detail-status.is-visible{display:block}
.detail-status--success{background:#ecfdf3;color:#166534;border-color:#bbf7d0}
.detail-status--error{background:#fef2f2;color:#b91c1c;border-color:#fecaca}
.detail-status--info{background:#f4f6fb;color:#1f2a44;border-color:#d0defc}
.detail-body{display:flex;flex-direction:column;gap:1rem}
.detail-edit-form{display:flex;flex-direction:column;gap:1rem}
.detail-form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.9rem}
.detail-field{display:flex;flex-direction:column;gap:.35rem;font-weight:600;color:#1f2a44}
.detail-field-label{font-size:.95rem}
.detail-input{padding:.45rem;border:1px solid #cbd5e1;border-radius:6px;font-size:1rem;font-weight:400;color:#0f172a}
.detail-input:focus-visible{outline:2px solid #2c64b5;outline-offset:2px;border-color:#2c64b5}
.detail-input-readonly{background:#f8fafc;color:#475569}
.detail-form-actions{display:flex;gap:.6rem;flex-wrap:wrap}
#detail-layout{display:block}
.detail-layout--with-software{display:flex;flex-direction:column;gap:1.5rem}
.detail-layout--with-software>.card{margin:0;max-width:none;width:100%}
.site-software-card{max-width:none;margin:0;width:100%}
.site-software-card__body{display:flex;flex-direction:column;gap:1rem}
.site-software-card__body .section{margin-top:0}
@media (min-width:980px){
    .detail-layout--with-software{display:grid;grid-template-columns:minmax(0,1.05fr) minmax(0,0.95fr);align-items:start;gap:1.5rem}
}
.btn-secondary{background:#eef2ff;border:1px solid #c7d2fe;color:#1e3a8a;border-radius:6px;padding:.45rem .9rem;cursor:pointer;font-weight:600}
.btn-secondary:hover,.btn-secondary:focus-visible{background:#e0e7ff}
.btn-secondary:focus-visible{outline:2px solid #1e3a8a;outline-offset:2px}

/* =============== Reports Page =============== */
.filters{background:#f7f9ff;border:1px solid #cfe0ff;border-radius:8px;padding:1rem;margin-bottom:1rem}
.filters form{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.8rem;align-items:end}
.filters label{display:block;font-weight:600;margin-bottom:.25rem}
.filters input,.filters select{width:100%;padding:.45rem}
.filter-actions{display:flex;gap:.6rem;align-items:center}
.filter-info{margin-top:.6rem;font-size:.9rem;color:#333}
.field--custom{display:grid;grid-template-columns:repeat(2,minmax(120px,1fr));gap:.5rem}
.field--custom[hidden]{display:none!important}

.report-type-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.35rem}
.type-btn{width:100%;text-align:left;padding:.45rem .6rem;border:1px solid #cfe0ff;background:#f7faff;border-radius:6px;cursor:pointer;font-weight:600;color:#003a70}
.type-btn:hover{background:#e8f1ff}
.type-btn.active{background:#0067c2;color:#fff;border-color:#0054a6}
.quick-link{border:none;background:none;padding:.35rem 0;text-align:left;cursor:pointer;color:#0067c2;font-weight:600}
.quick-link:hover{text-decoration:underline}

.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.8rem;margin-bottom:1rem}
.kpi-card{background:#fff;border:1px solid #dde5f7;border-radius:8px;padding:.9rem;box-shadow:0 1px 2px rgba(0,0,0,.08)}
.kpi-label{font-size:.85rem;color:#555}
.kpi-value{font-size:1.6rem;font-weight:700;margin-top:.2rem;color:#003a70}
.kpi-hint{font-size:.8rem;color:#777;margin-top:.25rem}

.tabnav{display:flex;gap:.3rem;border-bottom:2px solid #e5e7eb;margin-bottom:1rem}
.tabnav button{background:none;border:none;cursor:pointer;padding:.6rem .9rem;font-weight:600;border-bottom:3px solid transparent;color:#444}
.tabnav button[aria-selected="true"]{border-color:#0067c2;color:#003a70}

.report-panel{display:flex;flex-direction:column;gap:1rem}
.report-chart{min-height:140px;border:1px solid #e0e7ff;border-radius:8px;padding:1rem;background:#f8faff}
.chart-title{font-weight:600;margin-right:1rem}
.generated-at{font-size:.85rem;color:#555}
.chart-row{display:flex;align-items:center;gap:1rem;margin-bottom:.45rem}
.chart-label{flex:0 0 140px;font-weight:600;color:#003a70}
.chart-bar{flex:1 1 auto;background:#e3ebff;border-radius:999px;overflow:hidden;position:relative}
.chart-fill{display:block;background:#0067c2;color:#fff;font-size:.85rem;padding:.25rem .6rem;border-radius:999px 0 0 999px;min-width:3%;white-space:nowrap}
.chart-empty{color:#666;font-style:italic}

.toolbar{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
.toolbar .spacer{flex:1 1 auto}
.toolbar .btn{background:#f0f4ff;border:1px solid #cfe0ff;border-radius:6px;padding:.45rem .9rem;text-decoration:none;color:#003a70;font-weight:600}
.toolbar .btn:hover{background:#e1ecff}

.severity-kritisch{color:#b91c1c;font-weight:600}
.severity-warnung{color:#b45309;font-weight:600}
.severity-beobachten{color:#0c4a6e;font-weight:600}
.severity-ablauf-45-tage{color:#7c3aed;font-weight:600}
.severity-ok{color:#047857;font-weight:600}
.severity-abgeschlossen{color:#15803d;font-weight:600}
.severity-abgebrochen{color:#7f1d1d;font-weight:600}
.severity-uberfallig{color:#dc2626;font-weight:600}
.severity-fallig-7-tage{color:#d97706;font-weight:600}

#report-status{font-size:.9rem;color:#333}
#report-status.error{color:#b91c1c}
.help-note{margin-top:1rem;font-size:.9rem;color:#555}

@media (max-width:900px){
    .filters form{grid-template-columns:1fr}
    .chart-label{flex:0 0 110px}
}