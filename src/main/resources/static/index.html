<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LifeX – Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<a href="#main" class="skip-link">Skip to content</a>

<header>
    <!-- Brand logo shown for decorative purposes -->
    <img src="/img/LifeXDatawarehouseLogo.png" alt="">
    <nav aria-label="Main navigation">
        <a href="/index.html" aria-current="page">Dashboard</a>
        <a href="/create.html">Create Data</a>
        <a href="/reports.html">Reports</a>
    </nav>
</header>

<div class="layout">
    <!-- Sidebar with shortcuts and table list -->
    <aside class="sidebar">
        <section>
            <h2>Shortcuts</h2>

            <div id="shortcut-container">
                <!-- Shortcut preset 0: Accounts – complete inventory -->
                <div class="shortcut" data-id="sc0" data-default="type:account">
                    <button class="head">
                        <span class="rename">✏️</span>
                        <span class="label">Accounts – Full list</span>
                        <span class="chev">▶</span>
                    </button>
                    <div class="panel"><input></div>
                </div>

                <!-- Shortcut preset 1: Projects – active -->
                <div class="shortcut" data-id="sc1"
                     data-default='type:project AND statusactive'>
                    <button class="head">
                        <span class="rename">✏️</span>
                        <span class="label">Projects – active</span>
                        <span class="chev">▶</span>
                    </button>
                    <div class="panel"><input></div>
                </div>

                <!-- Shortcut preset 2: Service contracts – in progress -->
                <div class="shortcut" data-id="sc2"
                     data-default='type:servicecontract AND statusinprogress'>
                    <button class="head">
                        <span class="rename">✏️</span>
                        <span class="label">Service contracts – in progress</span>
                        <span class="chev">▶</span>
                    </button>
                    <div class="panel"><input placeholder="Lucene query (e.g. type:servicecontract AND statusinprogress)"></div>
                </div>

                <!-- Shortcut preset 3: Sites – FireZone Bravo -->
                <div class="shortcut" data-id="sc3"
                     data-default='type:site AND zonebravo'>
                    <button class="head">
                        <span class="rename">✏️</span>
                        <span class="label">Sites – FireZone Bravo</span>
                        <span class="chev">▶</span>
                    </button>
                    <div class="panel"><input></div>
                </div>

                <!-- Shortcut preset 4: Servers – Lenovo -->
                <div class="shortcut" data-id="sc4"
                     data-default='type:server AND Lenovo'>
                    <button class="head">
                        <span class="rename">✏️</span>
                        <span class="label">Servers – Lenovo</span>
                        <span class="chev">▶</span>
                    </button>
                    <div class="panel"><input placeholder="Lucene query (e.g. type:server AND Lenovo)"></div>
                </div>
            </div>

            <div class="shortcut-actions" aria-label="Shortcut controls">
                <button id="shortcut-remove" type="button" aria-label="Remove shortcut">−</button>
                <button id="shortcut-add" type="button" aria-label="Add shortcut">+</button>
            </div>
        </section>

        <!-- Table overview navigation -->
        <section class="tables">
            <h2>Tables</h2>
            <ul>
                <li onclick="showTable('Country')">Country</li>
                <li onclick="showTable('City')">City</li>
                <li onclick="showTable('Address')">Address</li>
                <li onclick="showTable('Account')">Account</li>
                <li onclick="showTable('Project')">Project</li>
                <li onclick="showTable('Site')">Site</li>
                <li onclick="showTable('Server')">Server</li>
                <li onclick="showTable('Clients')">Clients</li> <!-- Keep Clients pinned for quick access -->
                <li onclick="showTable('Radio')">Radio</li>
                <li onclick="showTable('AudioDevice')">AudioDevice</li>
                <li onclick="showTable('PhoneIntegration')">PhoneIntegration</li>
                <li onclick="showTable('DeploymentVariant')">DeploymentVariant</li>
                <li onclick="showTable('Software')">Software</li>
                <li onclick="showTable('UpgradePlan')">UpgradePlan</li>
                <li onclick="showTable('ServiceContract')">ServiceContract</li>
            </ul>
        </section>
    </aside>

    <!-- Main content area -->
    <main id="main" class="content">
        <!-- Progress bar showing the current indexing state -->
        <div id="idx-box" aria-live="polite">
            <div id="idx-bar">
                <span role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></span>
            </div>
            <div id="idx-text"></div>
        </div>

        <div class="search-shell">
            <button type="button" id="search-scope-indicator" class="search-scope-badge" aria-live="polite" aria-label="Active search scope">All</button>
            <div id="search-bar">
                <label for="search-input" class="visually-hidden">Global search</label>
                <!-- Keep the datalist for autocomplete; hide the native icon via CSS -->
                <input id="search-input" placeholder="Global search (Lucene or plain)" list="sug" autocomplete="off">
                <datalist id="sug"></datalist>
                <button id="search-btn">Search</button>
            </div>
        </div>

        <div id="resultArea" role="status" aria-live="polite" aria-atomic="true">
            <p>Use the search bar or the controls on the left.</p>
        </div>
    </main>

    <!-- Help sidebar -->
    <aside class="help" id="help-panel">
        <div class="help__header">
            <h2>Search help – quick tips</h2>
            <button type="button" class="help-toggle" aria-controls="help-panel" aria-expanded="true">
                <span class="help-toggle__icon" aria-hidden="true">☰</span>
                <span class="visually-hidden">Toggle help panel</span>
            </button>
        </div>
        <div class="help__body">
            <p>Enter multiple words to find records containing all terms, e.g., <code>auto teile</code>.</p>
            <p>Type the start of a word for prefix matches, e.g., <code>tech</code> finds “technik.”</p>
            <p>Use a leading asterisk for “contains” matches, e.g., <code>*box</code> finds anything ending with “box.”</p>
            <p>After selecting a table, searches stay within that scope (blue banner). Click the banner to search everywhere again.</p>

        <button id="advanced-help-toggle" class="info-badge" type="button" aria-expanded="false" aria-controls="advanced-help">ℹ️ Advanced search examples</button>
        <div id="advanced-help-status" class="visually-hidden" aria-live="polite"></div>
        <div id="advanced-help" class="advanced-help" hidden>
            <h3>Advanced syntax</h3>
            <ul>
                <li><strong>Phrase query:</strong> <code>"incident report"</code> keeps words together.</li>
                <li><strong>Field scope:</strong> <code>city:berlin AND type:site</code> limits matches to a field.</li>
                <li><strong>Wildcard:</strong> <code>serv?r*</code> matches server, serverless, etc.</li>
                <li><strong>Boolean mix:</strong> <code>(type:server OR type:site) AND status:active</code>.</li>
            </ul>
        </div>

        <hr>
        <h3>Index management</h3>
        <button id="idx-reindex-side" class="btn-primary">Reindex</button>
        <p style="font-size:.9rem;color:#555">Starts a full reindex; progress appears above as a bar.</p>
        </div>
    </aside>
</div>

<script src="/js/entity-type-map.js"></script>
<script src="/js/id-utils.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
